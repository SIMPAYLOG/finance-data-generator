input {
  kafka {
    bootstrap_servers => "kafka-1:29092,kafka-2:29093,kafka-3:29094"
    topics => ["topic-transaction"]
    group_id => "logstash-consumer-group"
    codec => json
    auto_offset_reset => "latest"
  }
}

filter {
  # 예시: timestamp 필드를 Logstash의 @timestamp로 변환 (LocalDateTime -> ISO8601 가정)
  date {
    match => ["timestamp", "ISO8601"]
    target => "@timestamp"
    timezone => "Asia/Seoul"
  }

  # 필요시 description 필드 트리밍, 기타 필드 가공 가능
  # mutate {
  #   strip => ["description"]
  # }
}

output {
  elasticsearch {
    hosts => ["http://elasticsearch:9200"]
    index => "transaction-logs-%{+YYYY.MM.dd}"
    # user, password 설정 없다면 기본 보안 비활성화 상태에서 접근 가능
  }

  stdout {
    codec => rubydebug
  }
}
